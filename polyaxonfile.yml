---
version: 1

kind: experiment

build:
  dockerfile: Dockerfile

run:
  cmd: python train.py --log_dir=./log/ --data_dir=./onera/ --weight_dir=/outputs/ --batch_size=10 --epochs=1 --loss=focal # Use default params

framework: pytorch
environment:
  resources:
    gpu:
      requests: 1
      limits: 1
  node_selector:
    polyaxon: exp-gpu
  replicas:
    n_workers: 2
    default_worker:
      resources:
        cpu:
          requests: 1
          limits: 4
      node_selector:
        polyaxon: exp-cpu


  persistence:
    data: ['data']
    outputs: 'outputs'

logging:
  level: INFO
